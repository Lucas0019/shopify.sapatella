{{ 'benefits-bar.css' | asset_url | stylesheet_tag }}
{{ 'benefits-bar.js' | asset_url | script_tag }}

<style>
  #shopify-section-{{ section.id }} {
    --benefits-bg: {{ section.settings.background }};
    --benefits-text: {{ section.settings.text_color }};
  }
</style>

<section class="benefits-bar" role="region" aria-label="Benefícios da loja">
  <div class="benefits-bar__container page-width">
    {% for block in section.blocks %}
      <div class="benefits-bar__item" {{ block.shopify_attributes }}>
        
        {% if block.settings.show_icon and block.settings.icon != blank %}
          <span class="benefits-bar__icon">
            <img
              src="{{ block.settings.icon | image_url: width: 64 }}"
              alt="{{ block.settings.icon.alt | escape }}"
              loading="lazy"
              width="28"
              height="28"
            >
          </span>
        {% endif %}

        <p class="benefits-bar__text">
          {{ block.settings.text }}
        </p>
      </div>
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Barra de Benefícios",
  "tag": "section",
  "class": "section-benefits-bar",
  "settings": [
    {
      "type": "color",
      "id": "background",
      "label": "Cor de fundo",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Cor do texto",
      "default": "#4F4F4F"
    }
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefício",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_icon",
          "label": "Exibir ícone",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Ícone"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Texto",
          "default": "Frete grátis para o Sudeste"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Barra de Benefícios",
      "blocks": [
        {
          "type": "benefit",
          "settings": {
            "show_icon": true,
            "text": "Frete Grátis p/ Sudeste"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "show_icon": true,
            "text": "R$ 20 off na 1ª compra"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "show_icon": true,
            "text": "Pague via PIX"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "show_icon": true,
            "text": "Parcele em até 6x sem juros"
          }
        }
      ]
    }
  ]
}
{% endschema %}
