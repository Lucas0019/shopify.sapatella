{% comment %}theme-check-disable UndefinedObject{% endcomment %}
{{ 'section-footer.css' | asset_url | stylesheet_tag }}

{% if section.settings.newsletter_enable %}
  <section
    class="newsletter-banner"
    aria-labelledby="newsletter-title"
  >
    <div class="newsletter-banner__content page-width">
      <div
        class="newsletter-banner__title"
        id="newsletter-title"
      >
        {{ section.settings.newsletter_title }}
      </div>

      <form class="newsletter-form-custom">
        <div class="field-group">
          <label class="visually-hidden" for="newsletter-name">
            Nome
          </label>
          <input
            id="newsletter-name"
            type="text"
            placeholder="Nome"
            required
            class="field__input"
          >

          <label class="visually-hidden" for="newsletter-email">
            E-mail
          </label>
          <input
            id="newsletter-email"
            type="email"
            placeholder="E-mail"
            required
            class="field__input"
          >

          <button
            type="submit"
            class="newsletter-form__button"
          >
            {{ section.settings.newsletter_button_label }}
          </button>
        </div>
      </form>
    </div>
  </section>
{% endif %}

<footer class="footer section-{{ section.id }}-padding">
  <div class="footer-main">
    <div class="footer-content">

      <div class="footer-column footer-column--brand">
        {% if section.settings.brand_logo != blank %}
          <img
            src="{{ section.settings.brand_logo | image_url: width: 300 }}"
            alt="{{ section.settings.brand_name }}"
            class="footer-brand-logo"
          >
        {% else %}
          <span class="brand-name">
            {{ section.settings.brand_name }}
          </span>
        {% endif %}

        {% if section.settings.show_social %}
          <nav
            class="footer-social"
            aria-label="Redes sociais"
          >
            {% for block in section.blocks %}
              {% if block.type == 'social' %}
                <a
                  href="{{ block.settings.link }}"
                  target="_blank"
                  rel="noopener"
                >
                  <img
                    src="{{ block.settings.icon | image_url: width: 40 }}"
                    alt="{{ block.settings.label }}"
                    loading="lazy"
                  >
                </a>
              {% endif %}
            {% endfor %}
          </nav>
        {% endif %}
      </div>

      <nav
        class="footer-column"
        aria-label="Sobre nós"
      >
        <h3 class="footer-column__title">
          {{ section.settings.title_sobre_nos }}
        </h3>
        <ul class="footer-menu">
          {% for link in linklists[section.settings.menu_sobre_nos].links %}
            <li>
              <a href="{{ link.url }}">{{ link.title }}</a>
            </li>
          {% endfor %}
        </ul>
      </nav>

      <nav
        class="footer-column"
        aria-label="Minha conta"
      >
        <h3 class="footer-column__title">
          {{ section.settings.title_minha_conta }}
        </h3>
        <ul class="footer-menu">
          {% for link in linklists[section.settings.menu_minha_conta].links %}
            <li>
              <a href="{{ link.url }}">{{ link.title }}</a>
            </li>
          {% endfor %}
        </ul>
      </nav>

      <nav
        class="footer-column"
        aria-label="Suporte e políticas"
      >
        <h3 class="footer-column__title">
          {{ section.settings.title_suporte }}
        </h3>
        <ul class="footer-menu">
          {% for link in linklists[section.settings.menu_suporte].links %}
            <li>
              <a href="{{ link.url }}">{{ link.title }}</a>
            </li>
          {% endfor %}
        </ul>
      </nav>

      <div class="footer-column">
        <h3 class="footer-column__title">
          {{ section.settings.title_pagamentos }}
        </h3>
        <div class="payment-icons">
          {% for block in section.blocks %}
            {% if block.type == 'payment' %}
              <img
                src="{{ block.settings.icon | image_url: width: 80 }}"
                alt="{{ block.settings.label }}"
                loading="lazy"
              >
            {% endif %}
          {% endfor %}
        </div>
      </div>

    </div>
  </div>

  <div class="footer-separator"></div>

  <div class="footer-bottom">
    <div class="footer-bottom__content">
      <address class="footer-legal">
        {{ section.settings.legal_text }}
      </address>

      <p>
        {{ section.settings.cnpj_text }}
      </p>

      <div class="footer-bottom__links">
        {% if section.settings.wicomm_image != blank %}
          <a
            href="{{ section.settings.wicomm_link }}"
            target="_blank"
            rel="noopener"
          >
            <img
              src="{{ section.settings.wicomm_image | image_url: width: 120 }}"
              alt="Wicomm"
              loading="lazy"
            >
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "header",
      "content": "Marca"
    },
    {
      "type": "image_picker",
      "id": "brand_logo",
      "label": "Logo da marca"
    },
    {
      "type": "text",
      "id": "brand_name",
      "label": "Nome da marca (fallback)",
      "default": "sapatella"
    },

    {
      "type": "header",
      "content": "Títulos das colunas"
    },
    {
      "type": "text",
      "id": "title_sobre_nos",
      "label": "Título - Sobre nós",
      "default": "SOBRE NÓS"
    },
    {
      "type": "text",
      "id": "title_minha_conta",
      "label": "Título - Minha conta",
      "default": "MINHA CONTA"
    },
    {
      "type": "text",
      "id": "title_suporte",
      "label": "Título - Suporte",
      "default": "SUPORTE E POLÍTICAS"
    },
    {
      "type": "text",
      "id": "title_pagamentos",
      "label": "Título - Pagamentos",
      "default": "FORMAS DE PAGAMENTO"
    },

    {
      "type": "header",
      "content": "Menus"
    },
    {
      "type": "link_list",
      "id": "menu_sobre_nos",
      "label": "Menu Sobre Nós"
    },
    {
      "type": "link_list",
      "id": "menu_minha_conta",
      "label": "Menu Minha Conta"
    },
    {
      "type": "link_list",
      "id": "menu_suporte",
      "label": "Menu Suporte"
    },

    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "checkbox",
      "id": "newsletter_enable",
      "label": "Exibir newsletter",
      "default": true
    },
    {
      "type": "richtext",
      "id": "newsletter_title",
      "label": "Texto da newsletter",
      "default": "<p>Cadastre-se e ganhe <strong>R$20 OFF</strong> na sua primeira compra!</p>"
    },
    {
      "type": "text",
      "id": "newsletter_button_label",
      "label": "Texto do botão"
    },

    {
      "type": "header",
      "content": "Rodapé inferior"
    },
    {
      "type": "textarea",
      "id": "legal_text",
      "label": "Texto legal"
    },
    {
      "type": "text",
      "id": "cnpj_text",
      "label": "CNPJ / Copyright"
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Mostrar redes sociais",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "wicomm_image",
      "label": "Imagem Wicomm"
    },
    {
      "type": "url",
      "id": "wicomm_link",
      "label": "Link Wicomm"
    },

    {
      "type": "header",
      "content": "Espaçamento"
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Margem superior",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    },
  ],
  "blocks": [
    {
      "type": "payment",
      "name": "Método de pagamento",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Logo do pagamento"
        },
        {
          "type": "text",
          "id": "label",
          "label": "Nome (acessibilidade)",
          "default": "Pagamento"
        }
      ]
    },
    {
      "type": "social",
      "name": "Rede social",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Ícone"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "text",
          "id": "label",
          "label": "Nome (acessibilidade)",
          "default": "Rede social"
        }
      ]
    }
  ],
  "max_blocks": 20
}
{% endschema %}
